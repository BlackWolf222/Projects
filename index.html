<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <title>PDF Merger</title>
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
</head>
<body>
    <div>
        <h2 id="title">PDFMerger</h2>
        <form method="post" action="/merge" enctype="multipart/form-data" id="form">
            <div class="dropzone" id="drop">
                <input type="file" name="pdfs" id="myFile" multiple accept=".pdf">
                <br><br>
                <img src="img/pdf.png" alt="pdf icon">
                <p>Drag 'n' drop some files here,or click to <label for="File">select files</label></p>
                <input type="file" id="File" name="pdfs" multiple accept=".pdf">
            </div>
            <br><br>
            <br><br>
            <input type="submit" value="Merge" id="submitbtn" >
            <br><br>
            <div id="dis">
                <p><h3>&emsp; Files:</h3> </p>
                <div id="fdisplay"></div>
            </div>
        </form>
    </div>
</body>
</html>

<script>
    var dropzone = document.getElementById('drop');
    var selDiv = document.querySelector("#fdisplay");

    dropzone.ondragover = dropzone.ondragenter = function(evt) {
        evt.preventDefault();
    };

    dropzone.ondrop = function(evt) {
        var fileInput = document.getElementById('myFile');
        evt.preventDefault();
        fileInput.files = evt.dataTransfer.files;
		select(fileInput.files)
        document.forms['form'].reset();
    };

    var selDiv = document.querySelector("#fdisplay");
	document.addEventListener("DOMContentLoaded", init, false);
	
	function init() {
		document.querySelector('#File').addEventListener('change', handleFileSelect, false);
	}
	
	function handleFileSelect(e) {
		if(!e.target.files) return;
		select(e.target.files)
	}

    function select(files) {
        selDiv.innerHTML = "";
		var files = files;
		for(var i=0; i<files.length; i++) {
			var f = files[i];
			selDiv.innerHTML += f.name + "<br/>";
		}
    }
</script>